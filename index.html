<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    
    <!-- Vendor Scripts -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script>

    <!-- Styles -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="stylesheet" href="https://unpkg.com/vue-material@beta/dist/vue-material.min.css">
    <link rel="stylesheet" href="https://unpkg.com/vue-material@beta/dist/theme/default.css">

    <?!= HtmlService.createHtmlOutputFromFile('Stylesheet').getContent(); ?>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
<body>
  
<div id="app" v-cloak>
  
  <login-dialog v-if="showLogin" v-on:login-success="onLoginSuccess"></login-dialog>

  <div class="md-layout md-alignment-top-center">
    <div class="md-layout-item">
      <md-card class="md-accent">
        <md-card-header>
          <div class="md-title"><b>DSA504</b>  Mobilizer Progress Tracker</div>
          <div class="md-subhead">Version 2.0</div>
        </md-card-header>
      </md-card>
      
      <md-card>
        <md-card-content style="padding-bottom:0px;">
          <div>
            Please select your name to get started!
          </div>
       
          <md-field>
            <label for="mobilizers">Mobilizer</label>
            <md-select name="mobilizers" id="mobilizers" v-model="activeMobilizer">  
              <md-option v-for="mob in mobilizers" :key="mob" :value="mob">
                {{ mob }}
              </md-option>
            </md-select>
          </md-field>
        </md-card-content>
      </md-card>
       
      <md-card v-if="activeMobilizer">
        <md-card-content style="padding-bottom:20px;padding-top:0px;">
          <md-field>
              <label for="progMembers">Program Member</label>
              <md-select 
                id="progMembers" 
                name="progMembers" 
                v-model="activeProgramMember"
              >
                <md-option v-for="pm in programMembers" :key="pm.name" :value="pm.id">
                    {{ pm.name }}
                </md-option>
              </md-select>
          </md-field>
        
          <md-table 
            id="progressTracker" 
            v-if="activeMobilizer" 
            v-model="programMembers" 
            @md-selected="onTableSelect"
          >
            <md-table-row 
              slot="md-table-row" 
              slot-scope="{ item }" 
              md-selectable="single" 
              class="md-primary"
            >
              <md-table-cell md-label="Program Member" class="firstCol">{{ item.name }}</md-table-cell>
              <md-table-cell md-label="Text?">
                <md-icon v-if="item.textSent" style="color:green">check_circle_outline</md-icon>
                <md-icon v-if="!item.textSent" style="opacity:.3">highlight_off</md-icon>
              </md-table-cell>
              <md-table-cell md-label="Call?">
                <md-icon v-if="item.callAttempted" style="color:green">check_circle_outline</md-icon>
                <md-icon v-if="!item.callAttempted" style="opacity:.3">highlight_off</md-icon>
              </md-table-cell>
              <md-table-cell md-label="Followup?">
                <md-icon v-if="item.sentFollowup" style="color:green">check_circle_outline</md-icon>
                <md-icon v-if="!item.sentFollowup" style="opacity:.3">highlight_off</md-icon>
              </md-table-cell>
              <md-table-cell md-label="Meetup?">
                <md-icon v-if="item.attended" style="color:green">check_circle_outline</md-icon>
                <md-icon v-if="!item.attended" style="opacity:.3">highlight_off</md-icon>
              </md-table-cell>
            </md-table-row>
          </md-table>
        </md-card-content>
      </md-card>

      <intake-form
        v-if="activeProgramMember"
      ></intake-form>

  </div>
  </div>

</div>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
<script src="https://unpkg.com/vue-material@1.0.0-beta-8/dist/vue-material.min.js"></script>
<?!= HtmlService.createHtmlOutputFromFile('LoginComponent').getContent(); ?>
<?!= HtmlService.createHtmlOutputFromFile('IntakeFormComponent').getContent(); ?>
<?!= HtmlService.createHtmlOutputFromFile('VueApp').getContent(); ?>
</body>
</html>